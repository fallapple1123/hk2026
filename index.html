<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 é¦™æ¸¯è¿ªå£«å°¼å®¶æ—æ—…éŠæ‰‹å¸³</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --disney-blue: #1A365D;
            --disney-gold: #C5A059;
            --disney-pink: #FADADD;
            --horse-red: #B22222;
            --bg-light: #F8F9FA;
            --white: #FFFFFF;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            padding-bottom: 80px;
            color: var(--disney-blue);
        }

        /* --- Header --- */
        header {
            background: linear-gradient(135deg, var(--disney-blue), #2A4365);
            color: var(--disney-gold);
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid var(--disney-gold);
            position: sticky; top: 0; z-index: 100;
        }

        /* --- Navigation Tab --- */
        .tab-bar {
            position: fixed; bottom: 0; width: 100%;
            background: var(--white);
            display: flex; justify-content: space-around;
            padding: 10px 0 calc(10px + env(safe-area-inset-bottom));
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .tab-btn {
            background: none; border: none; color: #718096;
            font-size: 0.75rem; display: flex; flex-direction: column; align-items: center; flex: 1;
        }

        .tab-btn.active { color: var(--disney-blue); font-weight: bold; }

        /* --- Content Layout --- */
        .content-section { display: none; padding: 15px; animation: fadeIn 0.3s ease; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .day-title {
            display: flex; align-items: center; justify-content: space-between;
            background: var(--disney-pink); padding: 10px 15px;
            border-radius: 12px; margin-bottom: 15px;
            border-left: 5px solid var(--disney-gold);
        }

        .timeline-item {
            position: relative; padding-left: 30px; margin-bottom: 20px;
            border-left: 2px dashed var(--disney-gold);
        }

        .timeline-item::before {
            content: ''; position: absolute; left: -7px; top: 0;
            width: 12px; height: 12px; background: var(--disney-gold); border-radius: 50%;
        }

        .time { font-weight: bold; color: var(--horse-red); }
        .btn-map {
            display: inline-block; margin-top: 8px; padding: 5px 12px;
            background: #E2E8F0; border-radius: 20px; text-decoration: none;
            font-size: 0.75rem; color: #2D3748;
        }

        .btn-stamp {
            background: var(--disney-gold); color: white; border: none;
            padding: 5px 15px; border-radius: 15px; font-size: 0.75rem;
            margin-top: 8px; cursor: pointer;
        }
        .btn-stamp.collected { background: #CBD5E0; }

        /* --- Stamp Collection --- */
        .stamp-book {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;
            padding: 15px; background: #FFF; border-radius: 15px;
            margin-top: 10px; border: 2px solid var(--disney-gold);
        }

        .stamp-slot {
            aspect-ratio: 1/1; background: #F7FAFC; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; padding: 5px; border: 1px dashed #CBD5E0;
        }

        .stamp-slot img {
            width: 100%; height: 100%; object-fit: contain;
            filter: grayscale(1); opacity: 0.2;
        }

        .stamp-slot.active { background: var(--disney-pink); border: 1px solid var(--disney-gold); }
        .stamp-slot.active img { filter: grayscale(0); opacity: 1; }

        /* --- Overlay --- */
        #stamp-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none;
            justify-content: center; align-items: center; z-index: 2000;
        }

        .stamp-animate {
            width: 180px; transform: scale(5); opacity: 0;
            animation: stampDown 0.3s forwards cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }

        @keyframes stampDown { to { transform: scale(1); opacity: 1; } }

        /* --- Wallet --- */
        .wallet-card { background: var(--white); padding: 15px; border-radius: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .total-banner { background: var(--disney-blue); color: var(--disney-gold); padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 15px; }
        .expense-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #EEE; font-size: 0.9rem; }
    </style>
</head>
<body>

<header>
    <h1>ğŸ 2026 å®¶æ—æ—…éŠãƒ»é¦™æ¸¯æ–°æ˜¥</h1>
    <p>Disney Dream Journey</p>
</header>

<div id="day1" class="content-section active">
    <div class="day-title"><span>Day 1 | 2/19</span><span>ğŸ° å¤¢å¹»å•Ÿç¨‹</span></div>
    <div class="timeline-item">
        <div class="time">11:30</div>
        <div class="event"><b>è¿ªå£«å°¼æ¨‚åœ’å…¥åœ’</b></div>
        <div class="desc">è¸å…¥å¥‡å¦™ä¸–ç•Œï¼Œé–‹å•Ÿå¤¢å¹»å†’éšªã€‚</div>
        <button class="btn-stamp" onclick="playStamp(0)">æ”¶é›†ï¼šå¤¢å¹»åŸå ¡ç« </button>
    </div>
    <div class="timeline-item">
        <div class="time">15:00</div>
        <div class="event"><b>é¦¬å¹´ç‰¹åˆ¥å·¡éŠ</b></div>
        <div class="desc">2026 ä¸™åˆé¦¬å¹´æ˜¥ç¯€ç‰¹åˆ¥è¡¨æ¼”ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(1)">æ”¶é›†ï¼šæ–°æ˜¥é¨°é¦¬ç« </button>
    </div>
</div>

<div id="day2" class="content-section">
    <div class="day-title"><span>Day 2 | 2/20</span><span>â›°ï¸ å¤ªå¹³å±±é ‚</span></div>
    <div class="timeline-item">
        <div class="time">17:40</div>
        <div class="event"><b>å¤ªå¹³å±±çºœè»Š</b></div>
        <div class="desc">æ­ä¹˜ç¶“å…¸å±±é ‚çºœè»Šä¿¯ç°ç¶­æ¸¯å¤œæ™¯ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(2)">æ”¶é›†ï¼šå¤ªå¹³çºœè»Šç« </button>
    </div>
</div>

<div id="day3" class="content-section">
    <div class="day-title"><span>Day 3 | 2/21</span><span>ğŸ¬ æµ·æ´‹å…¬åœ’</span></div>
    <div class="timeline-item">
        <div class="time">09:30</div>
        <div class="event"><b>æµ·æ´‹å…¬åœ’æ¢éšª</b></div>
        <div class="desc">çœ‹ç†Šè²“é›™èƒèƒã€ç©åˆºæ¿€è¨­æ–½ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(3)">æ”¶é›†ï¼šæµ·æ´‹å…¬åœ’ç« </button>
    </div>
    <div class="timeline-item">
        <div class="time">18:00</div>
        <div class="event"><b>å°–æ²™å’€è¡€æ‹¼</b></div>
        <div class="desc">æµ·é‹å¤§å»ˆèˆ‡è³¼ç‰©ä¸­å¿ƒå·¡ç¦®ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(4)">æ”¶é›†ï¼šè¡€æ‹¼è³¼ç‰©ç« </button>
    </div>
    <div class="timeline-item">
        <div class="time">20:00</div>
        <div class="event"><b>ä¼´æ‰‹ç¦®æ¡è²·</b></div>
        <div class="desc">çå¦®æ›²å¥‡èˆ‡çš‡ç¥è´è¶é…¥ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(5)">æ”¶é›†ï¼šç¾å‘³æ›²å¥‡ç« </button>
    </div>
</div>

<div id="day4" class="content-section">
    <div class="day-title"><span>Day 4 | 2/22</span><span>âœˆï¸ æœŸå¾…å†è¦‹</span></div>
    <div class="timeline-item">
        <div class="time">13:30</div>
        <div class="event"><b>è¿”èˆªæ™‚åˆ»</b></div>
        <div class="desc">å¸¶è‘—æ»¿æ»¿å›æ†¶å›åˆ°æº«æš–çš„å®¶ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(6)">æ”¶é›†ï¼šå¹³å®‰è¿”èˆªç« </button>
    </div>
    <div class="timeline-item">
        <div class="time">Bonus</div>
        <div class="event"><b>ç¥ç§˜å¤§å¸«æˆå°±</b></div>
        <div class="desc">è§£é–å°–æ²™å’€ Mezastar éš±è—ä»»å‹™ã€‚</div>
        <button class="btn-stamp" onclick="playStamp(7)">æ”¶é›†ï¼šéš±è—å¤§å¸«ç« </button>
    </div>
</div>

<div id="wallet" class="content-section">
    <div class="total-banner">
        <div style="font-size: 0.8rem; opacity: 0.8;">ç¸½èŠ±è²» (1 HKD = 4 TWD)</div>
        <div style="font-size: 1.8rem; font-weight: bold;">TWD <span id="total-twd">0</span></div>
    </div>
    <div class="wallet-card">
        <input type="text" id="exp-name" placeholder="é …ç›®" style="width:45%; padding:10px; border-radius:8px; border:1px solid #DDD;">
        <input type="number" id="exp-amount" placeholder="HKD" style="width:30%; padding:10px; border-radius:8px; border:1px solid #DDD;">
        <button onclick="addExpense()" style="width:20%; padding:10px; background:var(--disney-blue); color:white; border:none; border-radius:8px;">ï¼‹</button>
    </div>
    <div id="expense-list" style="margin-top:20px;"></div>
</div>

<div id="stamp-book-container" style="padding: 0 15px 15px;">
    <h3 style="font-size: 0.9rem; margin: 10px 0 5px;">ğŸ  2026 æ•¸ä½é›†ç« å†Š</h3>
    <div class="stamp-book" id="stamp-book">
        </div>
</div>

<nav class="tab-bar">
    <button class="tab-btn active" onclick="switchTab('day1')"><span>ğŸ“…</span>D1</button>
    <button class="tab-btn" onclick="switchTab('day2')"><span>ğŸ“…</span>D2</button>
    <button class="tab-btn" onclick="switchTab('day3')"><span>ğŸ“…</span>D3</button>
    <button class="tab-btn" onclick="switchTab('day4')"><span>ğŸ“…</span>D4</button>
    <button class="tab-btn" onclick="switchTab('wallet')"><span>ğŸ’°</span>éŒ¢åŒ…</button>
</nav>

<div id="stamp-overlay">
    <img id="stamp-anim-img" src="" class="stamp-animate">
</div>

<script>
    // --- é…ç½®åœ–ç‰‡è®Šæ•¸ ---
    const STAMP_CONFIG = [
        "fantasy castle.png",
        "horse.png",
        "cable car.png",
        "ocean park.png",
        "shopping.png",
        "cookie.png",
        "airplane.png",
        "hidden_master.png"
    ];

    let stamps = JSON.parse(localStorage.getItem('hk_stamps')) || [];
    let expenses = JSON.parse(localStorage.getItem('hk_expenses')) || [];

    // åˆå§‹åŒ–é›†ç« å†Š HTML
    function initStampBook() {
        const book = document.getElementById('stamp-book');
        book.innerHTML = STAMP_CONFIG.map((img, i) => `
            <div class="stamp-slot" id="slot-${i}">
                <img src="${img}" alt="stamp">
            </div>
        `).join('');
    }

    function switchTab(tabId) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
        document.getElementById('stamp-book-container').style.display = (tabId === 'wallet') ? 'none' : 'block';
    }

    function playStamp(index) {
        if (stamps.includes(index)) return;

        // å’šï¼éŸ³æ•ˆ
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'square';
        osc.frequency.setValueAtTime(150, ctx.currentTime);
        gain.gain.setValueAtTime(0.5, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
        osc.connect(gain); gain.connect(ctx.destination);
        osc.start(); osc.stop(ctx.currentTime + 0.3);

        // å‹•ç•«é¡¯ç¤º
        const overlay = document.getElementById('stamp-overlay');
        const img = document.getElementById('stamp-anim-img');
        img.src = STAMP_CONFIG[index];
        overlay.style.display = 'flex';

        setTimeout(() => {
            overlay.style.display = 'none';
            stamps.push(index);
            localStorage.setItem('hk_stamps', JSON.stringify(stamps));
            renderStatus();
        }, 800);
    }

    function renderStatus() {
        stamps.forEach(idx => {
            document.getElementById(`slot-${idx}`).classList.add('active');
            // æ‰¾åˆ°å°æ‡‰æŒ‰éˆ•ä¸¦ç¦ç”¨
            const btns = document.querySelectorAll('.btn-stamp');
            btns.forEach(btn => {
                if (btn.getAttribute('onclick') === `playStamp(${idx})`) {
                    btn.innerText = 'âœ… å·²æ”¶é›†';
                    btn.classList.add('collected');
                }
            });
        });
    }

    // --- è¨˜å¸³é‚è¼¯ ---
    function addExpense() {
        const name = document.getElementById('exp-name').value;
        const hkd = parseFloat(document.getElementById('exp-amount').value);
        if (!name || isNaN(hkd)) return;
        expenses.push({ name, hkd, twd: hkd * 4 });
        localStorage.setItem('hk_expenses', JSON.stringify(expenses));
        renderExpenses();
    }

    function renderExpenses() {
        const list = document.getElementById('expense-list');
        const totalDisp = document.getElementById('total-twd');
        let total = 0;
        list.innerHTML = expenses.slice().reverse().map(item => {
            total += item.twd;
            return `<div class="expense-item"><span>${item.name}</span><span>HK$${item.hkd} (NT$${item.twd})</span></div>`;
        }).join('');
        totalDisp.innerText = total.toLocaleString();
    }

    window.onload = () => {
        initStampBook();
        renderStatus();
        renderExpenses();
    };
</script>
</body>
</html>
