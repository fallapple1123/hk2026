<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 é¦™æ¸¯é¦¬å¹´å†’éšªç¹ªæœ¬</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Zhi+Mang+Xing&family=Zen+Kurenaido&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #FFF9F2;
            --p-pink: #FFD1D1;
            --a-blue: #D1E9FF;
            --text: #5D4037;
            --line: 2px solid #5D4037;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* 2. å¥—ç”¨æ‰‹å¯«å­—å‹ */
        body { font-family: 'Zen Kurenaido', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 15px; }
        h1, h2, h3 { font-family: 'Ma Shan Zheng', cursive; text-align: center; margin: 10px 0; }

        .card {
            background: white; border: var(--line); border-radius: 25px 15px 30px 20px / 15px 30px 20px 25px;
            padding: 15px; margin-bottom: 20px; box-shadow: 4px 4px 0px rgba(93, 64, 55, 0.1);
        }

        .tabs { display: flex; gap: 8px; margin-bottom: 15px; overflow-x: auto; }
        .tab { flex: 1; padding: 10px; border: var(--line); border-radius: 15px; text-align: center; background: var(--a-blue); cursor: pointer; font-weight: bold; min-width: 65px; }
        .tab.active { background: var(--p-pink); }

        .timeline-item { border-left: 2px dashed var(--text); padding-left: 20px; position: relative; margin-bottom: 15px; }
        .timeline-item::before { content: 'ğŸ'; position: absolute; left: -14px; top: 0; background: var(--bg); font-size: 18px; }
        .time { font-size: 0.85em; color: #888; display: block; }
        .item-title { font-weight: bold; color: #D32F2F; }

        .today-banner { background: #FFF0F0; border: 2px dashed #FF8A80; text-align: center; padding: 10px; border-radius: 15px; margin-bottom: 15px; font-weight: bold; }
        .hidden { display: none; }

        .btn { display: block; width: 100%; padding: 10px; margin-top: 8px; background: var(--p-pink); border: var(--line); border-radius: 12px; text-align: center; text-decoration: none; color: inherit; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-blue { background: var(--a-blue); margin-top: 5px; font-size: 0.8em; width: auto; display: inline-block; padding: 5px 10px; }

        .stamp-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .stamp { aspect-ratio: 1; border: 2px dashed #CCC; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; filter: grayscale(1); transition: 0.5s; background: #f9f9f9; overflow: hidden; }
        .stamp img { width: 100%; height: 100%; object-fit: contain; }
        .stamp.got { filter: grayscale(0); border: 2px solid var(--p-pink); background: #FFF0F0; transform: rotate(8deg); }

        .input-box { width: 100%; padding: 10px; border: 1px solid var(--text); border-radius: 10px; margin-bottom: 8px; font-family: inherit; }
        .expense-row { display: flex; justify-content: space-between; border-bottom: 1px dotted #ccc; padding: 5px 0; font-size: 0.9em; }
        .tag { display: inline-block; background: #E1F5FE; padding: 3px 8px; border-radius: 10px; font-size: 0.75em; margin-top: 5px; border: 1px solid #01579B; margin-right: 5px; }
    </style>
</head>
<body>

    <h1>ğŸ 2026 é¦™æ¸¯å†’éšªæ‰‹å¸³</h1>

    <div class="card" style="text-align: center;">
        <label>âœ¨ ä»Šæ—¥æ¨¡å¼ï¼š<input type="checkbox" id="modeSwitch" onchange="toggleToday()"></label>
        <div id="todayUI" class="hidden">
            <div class="today-banner">
                â³ è·é›¢ä¸‹ä¸€ç«™ï¼š<span id="nextStop">è¿ªå£«å°¼æ¨‚åœ’</span><br>
                <small id="timerDisplay">å€’æ•¸è¨ˆç®—ä¸­...</small>
            </div>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="setDay(1)">D1</div>
        <div class="tab" onclick="setDay(2)">D2</div>
        <div class="tab" onclick="setDay(3)">D3</div>
        <div class="tab" onclick="setDay(4)">D4</div>
    </div>

    <div id="itinerary">
        <div id="day1" class="day-section">
            <div class="timeline-item card">
                <span class="time">09:00 - 10:30</span>
                <span class="item-title">æŠµé”é¦™æ¸¯ & å¥½èŠå¡¢é…’åº—</span>
                <p>å°ˆè»Šæ¥é€è‡³é…’åº—å¯„è¡Œæï¼Œç›´æ¥å‰å¾€æ¨‚åœ’ï¼</p>
                <div class="tag">ğŸ´ æ™¶è·è»’ (è¿ªå£«å°¼é€ å‹é»å¿ƒ)</div>
                <button class="btn" onclick="addStamp(0)"><img src="fantasy castle.png" width="30"> è“‹ä¸ŠæŠµé”ç« </button>
            </div>
            <div class="timeline-item card">
                <span class="time">11:00 - 20:00</span>
                <span class="item-title">è¿ªå£«å°¼æ¨‚åœ’ Day 1</span>
                <p>2/19 ç¬¬ä¸€å¤©å…¥åœ’ï¼Œè¡åˆºç†±é–€è¨­æ–½ã€‚</p>
                <a class="btn" href="https://www.google.com/maps/search/Disneyland+Hong+Kong+Restaurant" target="_blank">ğŸ“ æ‰¾æ¨‚åœ’é¤å»³</a>
            </div>
        </div>

        <div id="day2" class="day-section hidden">
            <div class="timeline-item card">
                <span class="time">10:00 - 15:00</span>
                <span class="item-title">è¿ªå£«å°¼æ¨‚åœ’ Day 2</span>
                <p>è£œé½Šæ²’ç©åˆ°çš„é …ç›®ã€‚æ¨è–¦ï¼šç©è½‰æœ¨é¦¬ã€‚</p>
                <button class="btn" onclick="addStamp(1)"><img src="horse.png" width="30"> é¦¬å¹´æ—‹è½‰æœ¨é¦¬ç« </button>
            </div>
            <div class="timeline-item card">
                <span class="time">15:30 - 17:00</span>
                <span class="item-title">Check-in é‡‘åŸŸå‡æ—¥é…’åº—</span>
                <p>å¾è¿ªå£«å°¼ç§»å‹•è‡³å°–æ²™å’€ã€‚ç¨ä½œä¼‘æ¯ã€‚</p>
            </div>
            <div class="timeline-item card">
                <span class="time">18:00 - 21:00</span>
                <span class="item-title">å¤ªå¹³å±±é ‚å¤œæ™¯</span>
                <p>æ­çºœè»Šä¿¯ç°å¤œæ™¯ã€‚æ¨è–¦æ™šé¤ï¼šå±±é ‚å»£å ´ç¾é£Ÿã€‚</p>
                <button class="btn" onclick="addStamp(2)"><img src="cable car.png" width="30"> å¤ªå¹³å±±çºœè»Šç« </button>
            </div>
        </div>

        <div id="day3" class="day-section hidden">
            <div class="timeline-item card">
                <span class="time">10:00 - 18:00</span>
                <span class="item-title">æµ·æ´‹å…¬åœ’å†’éšª</span>
                <p>å…¨æ—¥æµ·æ´‹å†’éšªã€‚æ¨è–¦ï¼šæ­å¤§çºœè»Šã€çœ‹ä¼éµã€‚</p>
                <div class="tag">ğŸ´ æµ·é¾ç‹é¤å»³</div>
                <button class="btn" onclick="addStamp(3)"><img src="ocean park.png" width="30"> æµ·æ´‹å†’éšªç« </button>
            </div>
            <div class="timeline-item card">
                <span class="time">19:30</span>
                <span class="item-title">å°–æ²™å’€ç¾é£Ÿ & æ•£æ­¥</span>
                <p>é‡‘åŸŸå‡æ—¥å‘¨é‚Šæ™šé¤ã€‚æ¨è–¦ï¼šç‚ºé£Ÿæé¾ã€‚</p>
                <button class="btn" onclick="addStamp(4)"><img src="shopping.png" width="30"> å°–æ²™å’€ç« </button>
            </div>
        </div>

        <div id="day4" class="day-section hidden">
            <div class="timeline-item card">
                <span class="time">09:00 - 10:30</span>
                <span class="item-title">ä¼´æ‰‹ç¦®è£œè²¨æ™‚é–“</span>
                <p>çå¦®æ›²å¥‡(å°ç†Š)ã€æ›²å¥‡å››é‡å¥ã€æµ·æ¸¯åŸã€‚</p>
                <div class="tag">ğŸ›ï¸ å¿…è²·ï¼šè´è¶é…¥</div>
                <button class="btn" onclick="addStamp(5)"><img src="cookie.png" width="30"> ä¼´æ‰‹ç¦®ç« </button>
            </div>
            <div class="timeline-item card">
                <span class="time">11:00 - 13:30</span>
                <span class="item-title">å‰å¾€æ©Ÿå ´ & æ­¸é€”</span>
                <p>æ­æ©Ÿ BR868 13:30-15:20ã€‚æ©Ÿå ´ Disney Store åšæœ€å¾Œè¡åˆºã€‚</p>
                <button class="btn" onclick="addStamp(6)"><img src="airplane.png" width="30"> å†’éšªæ»¿è¼‰ç« </button>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>ğŸ“œ 2026 é¦¬å¹´é›†ç« å†Š</h3>
        <div class="stamp-grid" id="stampBox">
            <div class="stamp"><img src="fantasy castle.png"></div>
            <div class="stamp"><img src="horse.png"></div>
            <div class="stamp"><img src="cable car.png"></div>
            <div class="stamp"><img src="ocean park.png"></div>
            <div class="stamp"><img src="cookie.png"></div>
            <div class="stamp"><img src="shopping.png"></div>
            <div class="stamp"><img src="airplane.png"></div>
            <div class="stamp"><img src="hidden_master.png"></div>
        </div>
    </div>

    <div class="card">
        <h3>ğŸ’° å†’éšªéŒ¢åŒ… (1 HKD = 4 TWD)</h3>
        <input type="text" id="expNote" class="input-box" placeholder="é …ç›®ï¼šå¦‚è´è¶é…¥">
        <input type="number" id="expAmt" class="input-box" placeholder="æ¸¯å¹£é‡‘é¡">
        <button class="btn" onclick="saveExp()">ğŸ“ å­˜å…¥å¸³å–®</button>
        <div id="expList" style="margin-top: 15px; max-height: 150px; overflow-y: auto;"></div>
        <div style="text-align: right; font-weight: bold; padding-top: 10px; border-top: 1px dashed #ccc;">
            ç¸½èŠ±è²»ï¼š<span id="totalTwd" style="color: #D32F2F;">0</span> TWD
        </div>
        <button class="btn" style="background: #E8F5E9;" onclick="exportCSV()">ğŸ“¤ åŒ¯å‡º CSV å ±è¡¨</button>
    </div>

    <script>
        function setDay(d) {
            document.querySelectorAll('.day-section').forEach((s, i) => s.classList.toggle('hidden', i+1 !== d));
            document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i+1 === d));
        }

        function toggleToday() {
            const isToday = document.getElementById('modeSwitch').checked;
            document.getElementById('todayUI').classList.toggle('hidden', !isToday);
            if(isToday) startTimer();
        }

        function startTimer() {
            document.getElementById('timerDisplay').innerText = "å€’æ•¸ï¼š1å°æ™‚20åˆ†15ç§’";
        }

        let stamps = JSON.parse(localStorage.getItem('hk_stamps')) || [];

        function updateStamps() {
            const items = document.querySelectorAll('.stamp');
            stamps.forEach(idx => {
                if (items[idx]) items[idx].classList.add('got');
            });

            if (stamps.length >= 7 && !stamps.includes(7)) {
                setTimeout(() => {
                    alert("ğŸŠ å¤ªæ£’äº†ï¼éš±è—ä»»å‹™é”æˆï¼è§£é–ã€2026 é¦¬å¹´å¤§å†’éšªå®¶ã€å‹³ç« ï¼");
                    addStamp(7);
                }, 1000);
            }
        }

        function addStamp(idx) {
            if(!stamps.includes(idx)) {
                stamps.push(idx);
                localStorage.setItem('hk_stamps', JSON.stringify(stamps));
                updateStamps();
            }
        }

        let expData = JSON.parse(localStorage.getItem('hk_exp')) || [];
        function showExp() {
            const list = document.getElementById('expList');
            const total = document.getElementById('totalTwd');
            list.innerHTML = '';
            let sum = 0;
            expData.forEach((e, i) => {
                sum += e.amt * 4;
                list.innerHTML += `<div class="expense-row"><span>${e.note}</span><span>$${e.amt} (NT${e.amt*4})</span></div>`;
            });
            total.innerText = sum.toLocaleString();
        }
        function saveExp() {
            const note = document.getElementById('expNote').value;
            const amt = document.getElementById('expAmt').value;
            if(note && amt) {
                expData.push({note, amt: parseFloat(amt)});
                localStorage.setItem('hk_exp', JSON.stringify(expData));
                document.getElementById('expNote').value = '';
                document.getElementById('expAmt').value = '';
                showExp();
            }
        }
        function exportCSV() {
            let csv = "é …ç›®,æ¸¯å¹£,å°å¹£\n";
            expData.forEach(e => csv += `${e.note},${e.amt},${e.amt*4}\n`);
            const blob = new Blob(["\ufeff" + csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url; a.download = "2026é¦™æ¸¯ä¹‹æ—….csv"; a.click();
        }

        updateStamps();
        showExp();
    </script>
</body>
</html>
