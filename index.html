<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 é¦™æ¸¯é¦¬å¹´å†’éšªæ‰‹å¸³</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #FFF9F2;
            --p-pink: #FFD1D1;
            --a-blue: #D1E9FF;
            --text: #5D4037;
            --line: 2.5px solid #5D4037;
        }

        /* å…¨åŸŸå­—é«”å¼·åˆ¶çµ±ä¸€ */
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            font-family: 'Noto Sans TC', sans-serif !important; 
        }

        body { 
            background-color: var(--bg); 
            background-image: radial-gradient(#e5e5f7 0.8px, transparent 0.8px), radial-gradient(#e5e5f7 0.8px, #FFF9F2 0.8px);
            background-size: 24px 24px;
            color: var(--text); 
            margin: 0; padding: 15px; 
            font-weight: 500;
        }

        h1, h2, h3 { text-align: center; margin: 15px 0; font-weight: 700; }

        .card {
            background: white; border: var(--line); border-radius: 25px 15px 30px 20px / 15px 30px 20px 25px;
            padding: 15px; margin-bottom: 20px; box-shadow: 4px 4px 0px rgba(93, 64, 55, 0.1);
        }

        /* âœˆï¸ èˆªç­å¡ç‰‡ */
        .flight-card { background: #fef9e7; border: 2px dashed var(--text); padding: 15px; border-radius: 18px; margin-bottom: 20px; }
        .flight-row { display: flex; justify-content: space-between; align-items: center; }

        /* åˆ†é  */
        .tabs { display: flex; gap: 8px; margin-bottom: 15px; overflow-x: auto; }
        .tab { flex: 1; padding: 12px; border: var(--line); border-radius: 15px; text-align: center; background: var(--a-blue); cursor: pointer; font-weight: 700; min-width: 65px; }
        .tab.active { background: var(--p-pink); }

        /* è¡Œç¨‹ */
        .timeline-item { border-left: 2px dashed var(--text); padding-left: 20px; position: relative; margin-bottom: 15px; }
        .timeline-item::before { content: 'ğŸ'; position: absolute; left: -14px; top: 0; background: white; border-radius: 50%; padding: 2px; }

        /* é›†ç« å†Š */
        .stamp-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .stamp { aspect-ratio: 1; border: 2.5px dashed #CCC; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #f9f9f9; overflow: hidden; filter: grayscale(1); }
        .stamp img { width: 85%; height: 85%; object-fit: contain; }
        .stamp.got { filter: grayscale(0); border: 2.5px solid var(--p-pink); background: #FFF0F0; animation: pop-in 0.4s forwards; }

        /* ğŸ”´ ä¿®æ­£å¾Œçš„è“‹ç« å‹•ç•«ç‰¹æ•ˆå±¤ */
        #stamp-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 10000; 
        }
        .anim-img { width: 220px; height: 220px; opacity: 0; }
        
        /* å‹•ç•«å¯¦ä½œ */
        .show-stamp .anim-img { animation: stamp-down 0.6s ease-out forwards; }

        @keyframes stamp-down {
            0% { transform: scale(5) rotate(-20deg); opacity: 0; }
            50% { transform: scale(1) rotate(0deg); opacity: 1; }
            80% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(1.1) rotate(10deg); opacity: 0; }
        }
        @keyframes pop-in { 0% { transform: scale(0); } 100% { transform: scale(1) rotate(8deg); } }

        .btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin-top: 8px; background: var(--p-pink); border: var(--line); border-radius: 12px; font-weight: 700; cursor: pointer; text-decoration: none; color: inherit; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>ğŸ 2026 é¦™æ¸¯å†’éšªæ‰‹å¸³</h1>

    <div class="flight-card">
        <h3>âœˆï¸ èˆªç­è³‡è¨Š</h3>
        <div class="flight-row">
            <div><strong>2/19 BR891</strong><br><small>07:00 ğŸ›« 09:00</small></div>
            <div style="font-size: 1.5em;">âœˆï¸</div>
            <div style="text-align: right;"><strong>2/22 BR868</strong><br><small>13:30 ğŸ›« 15:20</small></div>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="setDay(1)">D1</div>
        <div class="tab" onclick="setDay(2)">D2</div>
        <div class="tab" onclick="setDay(3)">D3</div>
        <div class="tab" onclick="setDay(4)">D4</div>
    </div>

    <div id="itinerary">
        <div id="day1" class="day-section">
            <div class="timeline-item card">
                <strong>æŠµé”é¦™æ¸¯ & è¿ªå£«å°¼å¥½èŠå¡¢é…’åº—</strong>
                <p>2/19 ç­æ©ŸæŠµé”å¾Œï¼Œç›´æ¥å‰å¾€é…’åº—å¯„æ”¾è¡Œæã€‚</p>
                <button class="btn" onclick="addStamp(0)"><img src="fantasy castle.png" width="25" onerror="this.style.display='none'"> è“‹ç« ï¼šæŠµé”å†’éšª</button>
            </div>
            <div class="timeline-item card">
                <strong>è¿ªå£«å°¼æ¨‚åœ’ Day 1</strong>
                <p>é–‹å§‹é¦¬å¹´å†’éšªï¼</p>
            </div>
        </div>
        <div id="day2" class="day-section hidden">
            <div class="timeline-item card">
                <strong>è¿ªå£«å°¼æ¨‚åœ’ Day 2</strong>
                <p>15:00 é›¢é–‹å‰å¾€å°–æ²™å’€é‡‘åŸŸå‡æ—¥é£¯åº—ã€‚</p>
                <button class="btn" onclick="addStamp(1)"><img src="horse.png" width="25" onerror="this.style.display='none'"> è“‹ç« ï¼šé¦¬å¹´æœ¨é¦¬</button>
            </div>
        </div>
        <div id="day3" class="day-section hidden">
            <div class="timeline-item card">
                <strong>2/21 æµ·æ´‹å…¬åœ’</strong>
                <p>å…¨æ—¥æ¢éšªå†’éšªã€‚</p>
                <button class="btn" onclick="addStamp(3)"><img src="ocean park.png" width="25" onerror="this.style.display='none'"> è“‹ç« ï¼šæµ·æ´‹å†’éšª</button>
            </div>
        </div>
        <div id="day4" class="day-section hidden">
            <div class="timeline-item card">
                <strong>æœ€å¾Œè£œè²¨ & æ©Ÿå ´</strong>
                <p>æ­ä¹˜ 13:30 BR868 ç­æ©Ÿå›å°ç£ã€‚</p>
                <button class="btn" onclick="addStamp(6)"><img src="airplane.png" width="25" onerror="this.style.display='none'"> è“‹ç« ï¼šå†’éšªæˆåŠŸï¼</button>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>ğŸ“œ 2026 é¦¬å¹´ç´€å¿µç« å†Š</h3>
        <div class="stamp-grid" id="stampBox">
            <div class="stamp"><img src="fantasy castle.png"></div>
            <div class="stamp"><img src="horse.png"></div>
            <div class="stamp"><img src="cable car.png"></div>
            <div class="stamp"><img src="ocean park.png"></div>
            <div class="stamp"><img src="shopping.png"></div>
            <div class="stamp"><img src="cookie.png"></div>
            <div class="stamp"><img src="airplane.png"></div>
            <div class="stamp"><img src="hidden_master.png"></div>
        </div>
    </div>

    <button onclick="resetData()" style="background:none; border:none; color:#ccc; width:100%; font-size:12px; margin-top:20px;">[ æ¸…é™¤ç´€éŒ„é‡æ–°æ¸¬è©¦ ]</button>

    <div id="stamp-overlay">
        <img id="active-stamp-img" src="" class="anim-img">
    </div>
    <audio id="stamp-sound" src="https://assets.mixkit.co/active_storage/sfx/2012/2012-preview.mp3" preload="auto"></audio>

    <script>
        function setDay(d) {
            document.querySelectorAll('.day-section').forEach((s, i) => s.classList.toggle('hidden', i+1 !== d));
            document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i+1 === d));
        }

        let stamps = JSON.parse(localStorage.getItem('hk_stamps')) || [];
        const stampPaths = ["fantasy castle.png", "horse.png", "cable car.png", "ocean park.png", "shopping.png", "cookie.png", "airplane.png", "hidden_master.png"];

        function updateStamps() {
            const items = document.querySelectorAll('.stamp');
            stamps.forEach(idx => { if (items[idx]) items[idx].classList.add('got'); });
            
            // éš±è—ç« é‚è¼¯
            if (stamps.length >= 7 && !stamps.includes(7)) {
                setTimeout(() => { addStamp(7); }, 1500);
            }
        }

        function addStamp(idx) {
            // å¦‚æœå·²ç¶“é›†éäº†ï¼Œå°±ä¸å†è·‘å‹•ç•« (ç‚ºäº†æ¸¬è©¦æ‚¨å¯ä»¥å…ˆé»æœ€ä¸‹æ–¹çš„é‡ç½®)
            if(!stamps.includes(idx)) {
                const sound = document.getElementById('stamp-sound');
                const overlay = document.getElementById('stamp-overlay');
                const animImg = document.getElementById('active-stamp-img');

                // æ’­æ”¾éŸ³æ•ˆ
                sound.currentTime = 0; sound.play();

                // é¡¯ç¤ºç‰¹æ•ˆ
                animImg.src = stampPaths[idx];
                overlay.style.display = 'flex';
                overlay.classList.add('show-stamp');

                setTimeout(() => {
                    overlay.style.display = 'none';
                    overlay.classList.remove('show-stamp');
                    
                    if (!stamps.includes(idx)) {
                        stamps.push(idx);
                        localStorage.setItem('hk_stamps', JSON.stringify(stamps));
                        updateStamps();
                    }
                }, 600);
            }
        }

        function resetData() {
            if(confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é›†ç« ç´€éŒ„å—ï¼Ÿ")) {
                localStorage.clear();
                location.reload();
            }
        }

        updateStamps();
    </script>
</body>
</html>
